<!-- Map Creator - index.html -->
<!-- Open Source Web Engine -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Map Creator 3D</title>
  <link id="PageTheme" rel="stylesheet" href="css/theme/dark/main.css" />
</head>
<body>
  <!-- Menu Strips -->
  <menu-strip>
    <!-- Menu Strip - File -->
    <div class="menuItem" id="fileMenuBtn" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <span>File</span>
      <ul class="dropdown" role="menu" aria-label="File menu">
        <li id="menuSave" role="menuitem" tabindex="-1">Save</li>
        <li id="menuLoad" role="menuitem" tabindex="-1">Open</li>
        <li id="ExportButton" role="menuitem" tabindex="-1">Export</li>
      </ul>
    </div>
    <!-- Menu Strip - Add A Object -->
    <div class="menuItem" id="addMenuBtn" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <span>Add</span>
      <ul class="dropdown" role="menu" aria-label="Add menu">
        <!-- Create A Cube Geometry/Box Geometry -->
        <li id="menuCube" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/cube.svg" alt="" class="menu-icon" />
          Create Cube
        </li>
        <!-- Create A Cylinder Geometry -->
        <li id="menuCylinder" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/cylinder.png" alt="" class="menu-icon" />
          Create Cylinder
        </li>
        <!-- Create A Sphere Geometry -->
        <li id="menuSphere" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/sphere.svg" alt="" class="menu-icon" />
          Create Sphere
        </li>
        <!-- Create A Cone Geometry -->
        <li id="menuCone" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/cone.png" alt="" class="menu-icon" />
          Create Cone
        </li>
        <!-- Create A Plane Geometry -->
        <li id="menuPlane" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/plane.png" alt="" class="menu-icon" />
          Create Plane
        </li>
        <!-- Create A Camera Object -->
        <li id="menuCamera" role="menuitem" tabindex="-1">
          <img src="resources/images/ui/icons/camera.png" alt="" class="menu-icon" />
          Create Camera
        </li>
      </ul>
    </div>
    <!-- Menu Strip - Precerences -->
    <div class="menuItem" id="PreferencesMenuButton" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <span>Preferences</span>
      <ul class="dropdown" role="menu" aria-label="Themes Button">
        <!-- Open A Themes Menu -->
        <li id="ThemesButton" role="menuitem" tabindex="-1">
          Themes
        </li>
      </ul>
    </div>
  </menu-strip>

  <!-- ================= TOP BUTTONS ================= -->
  <header id="topMenu" role="navigation" aria-label="Main menu">
    <nav id="leftButtons">
      <!-- Run Button -->
      <button id="runButton" class="actionButtons" aria-label="Run">
        <img src="resources/images/ui/buttons/play.svg" role="presentation" />
      </button>
      
      <!-- Pause Button -->
      <button id="pauseButton" class="actionButtons" aria-label="Pause">
        <img src="resources/images/ui/buttons/pause.svg" role="presentation" />
      </button>
      
      <!-- Stop Button -->
      <button id="stopButton" class="actionButtons" aria-label="Stop">
        <img src="resources/images/ui/buttons/stop.svg" role="presentation" />
      </button>

      <!-- Edit Script -->
      <button id="focusScriptBtn" aria-label="Focus Script" title="Put the script in fullscreen">
        <img src="resources/images/ui/buttons/fullscreen.svg" />
        <span>Edit Script</span>
      </button>

      <!-- Import A Plugin (.Plugin File) -->
      <button id="pluginBtn" aria-label="Plugin" title="Import plugins for customization">
        <img src="resources/images/ui/icons/plugin.png" />
        <span>Import Plugin</span>
      </button>
      <input type="file" id="pluginFileInput" accept=".plugin" hidden />
    </nav>

    <nav id="rightButtons">
      <!-- Objects Wireframe -->
      <button id="wireframeToggleBtn" aria-label="Toggle Wireframe" title="Put in objects wireframe mode">
        <img src="resources/images/ui/buttons/wireframe.svg" role="presentation" />
        <span>Wireframe</span>
      </button>

      <!-- Set Texture To Objects -->
      <button id="importTextureBtn" aria-label="Import Texture" title="Set Texture To Selected Object">
        <img src="resources/images/ui/icons/texture.svg" role="presentation" />
        Set Texture
      </button>
      <input type="file" id="importButton" accept="image/png, image/jpeg" hidden />

      <!-- Map Background Color -->
      <label for="bgColorInput" id="skyColorLabel" class="colorInputWrapper" title="Put a background color with HEX color code">
        Map Background Color:
        <input type="text" id="bgColorInput" maxlength="7" value="#00AFFF" placeholder="#00AFFF" autocomplete="off" />
      </label>
    </nav>
  </header>

  <!-- ================= Objects Panel ================= -->
  <aside id="panel" aria-label="Map editor controls">
    <div id="panel-resize-handle" aria-hidden="true"></div>

    <!-- Scale Objects -->
    <section class="control-group" aria-labelledby="scaleLabel">
      <h2 id="scaleLabel" class="sr-only">Scale Controls</h2>
      <label for="scaleX">Scale X: <input type="number" id="scaleX" step="0.1" min="0.1" value="1" disabled /></label>
      <label for="scaleY">Scale Y: <input type="number" id="scaleY" step="0.1" min="0.1" value="1" disabled /></label>
      <label for="scaleZ">Scale Z: <input type="number" id="scaleZ" step="0.1" min="0.1" value="1" disabled /></label>
    </section>

    <!-- Position Objects -->
    <section class="control-group" aria-labelledby="positionLabel">
      <h2 id="positionLabel" class="sr-only">Position Controls</h2>
      <label for="posX">Position X: <input type="number" id="posX" step="0.1" value="0" disabled /></label>
      <label for="posY">Position Y: <input type="number" id="posY" step="0.1" value="0" disabled /></label>
      <label for="posZ">Position Z: <input type="number" id="posZ" step="0.1" value="0" disabled /></label>
    </section>

    <!-- Rotation Objects -->
    <section class="control-group" aria-labelledby="rotationLabel">
      <h2 id="rotationLabel" class="sr-only">Rotation Controls</h2>
      <label for="rotX">Rotation X: <input type="number" id="rotX" step="0.1" /></label>
      <label for="rotY">Rotation Y: <input type="number" id="rotY" step="0.1" /></label>
      <label for="rotZ">Rotation Z: <input type="number" id="rotZ" step="0.1" /></label>
    </section>
    
    <!-- Colors Inputs/Parameters -->
    <section class="control-group color-center" aria-labelledby="colorLabel">
      <!-- Change Color Type -->
      
      <!-- Hex Color Input -->
      <label for="colorHex" class="colorInputWrapper">
        HEX Color: <input type="text" id="colorHex" maxlength="7" pattern="#[0-9a-fA-F]{6}" placeholder="#ffffff"/>
      </label>
    </section>

    <label>
      ID:
      <input type="text" id="ID-Input"/>
    </label>

    <!-- Tree View Objects -->
    <section id="Tree_View" tabindex="0" aria-label="List of cubes"></section>

    <!-- Scripting -->
    <section id="scriptingSection" aria-label="Scripting console">
      <button id="exitScriptFocusBtn" style="display:none; margin-top:10px;">Back</button>
      <h2>Scripting</h2>
      <textarea id="scriptInput"></textarea>
      <div id="scriptOutput"></div>
    </section>
  </aside>

  <div id="addWindow" class="centerPopUp" style="display: none;">
    <div id="addWindowContent" class="centerPopUpContent">
      <!-- Create Folder In Tree View -->
      
      <button id="aW_CreateFolder" class="centerPopUpOption">
        <img src="resources/images/ui/icons/folder.svg" role="presentation" />
        Create Folder
      </button>
      
      <!-- Create Folder In Tree View -->
      
      <button id="aW_CreateScript" class="centerPopUpOption">
        <img src="resources/images/ui/icons/kerneliumScript_File.svg" role="presentation" />
        Create Script
      </button>
    </div>
  </div>

  <div id="ThemesWindow" class="centerPopUp" style="display: none;">
    <div id="ThemesWindowContent" class="centerPopUpContent">
      <!-- Set Theme To Light -->
      
      <button id="TW_Light" class="centerPopUpOption" onClick='SetTheme("css/theme/light/main.css");'>
        Light Teme
      </button>

      <!-- Set Theme To Dark -->
      
      <button id="TW_Dark" class="centerPopUpOption" onClick='SetTheme("css/theme/dark/main.css");'>
        Dark Theme
      </button>
    </div>
  </div>

  <main id="sceneContainer" role="main"></main>
  <!-- Camera FOV Display -->
  
  <div id="fovDisplay">FOV: 75</div>

  <!-- Command Input-->
  <div id="commandLineWrapper">
    <input type="text" id="commandLine" placeholder="Type a command..." />
  </div>

  <!-- Hiden Inputs -->
  <input type="file" id="loadInput" accept=".map,application/json" hidden />

  <!-- Libraries | libs/ -->

  <!-- Three.js | three.js/ -->
  
  <script src="libs/three.js/three.min.js"></script>
  <script src="libs/three.js/objLoader.js"></script>

  <!-- Map Creator -->
  
  <script src="libs/kfw.js"></script>
  <script src="libs/kht.js"></script>

  <!-- Scripts | scripts/ -->
  
  <script type="module" src="scripts/main.js"></script>

  <!-- Import | import/ -->
  
  <script src="scripts/import/plugin.js"></script>
  <script src="scripts/import/texture.js"></script>

  <!-- Objects | objects/ -->
  
  <script src="scripts/objects/wireframe.js"></script>
  <script src="scripts/objects/history.js"></script>

  <!-- Codes | codes/ -->
  
  <script type="module" src="scripts/codes/scripting.js"></script>
  <script src="scripts/codes/json.js"></script>

  <!-- Files | files/ -->
  
  <script type="module" src="scripts/files/save.js"></script>
  <script type="module" src="scripts/files/load.js"></script>

  <!-- Services | services/ -->
  
  <script type="module" src="scripts/services/menuStrip.js"></script>
  <script type="module" src="scripts/services/keys.js"></script>
  
  <script src="scripts/services/lang.js"></script>

  <!-- Interface | ui/ -->
  
  <script src="scripts/ui/theme.js"></script>

  <script>
    const focusBtn = document.getElementById("focusScriptBtn");
    const exitBtn = document.getElementById("exitScriptFocusBtn");
    focusBtn.addEventListener("click", () => {
      document.body.classList.add("focusing-script");
      exitBtn.style.display = "inline-block";
    });
    exitBtn.addEventListener("click", () => {
      document.body.classList.remove("focusing-script");
      exitBtn.style.display = "none";
    });

    document.getElementById('importTextureBtn').addEventListener('click', () => {
      document.getElementById('importButton').click();
    });
  </script>
</body>
</html>
















