<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Editor com Aba Objects/Map</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <aside id="panel">
    <!-- Botão para alternar abas -->
    <button id="togglePanelBtn">Map</button>

    <!-- Aba Objects -->
    <div id="objectSettings">
      <section class="control-group">
        <label for="scaleX">Scale X: <input type="number" id="scaleX" step="0.1" value="1"></label>
        <label for="scaleY">Scale Y: <input type="number" id="scaleY" step="0.1" value="1"></label>
        <label for="scaleZ">Scale Z: <input type="number" id="scaleZ" step="0.1" value="1"></label>
      </section>

      <section class="control-group">
        <label for="posX">Pos X: <input type="number" id="posX" step="0.1" value="0"></label>
        <label for="posY">Pos Y: <input type="number" id="posY" step="0.1" value="0"></label>
        <label for="posZ">Pos Z: <input type="number" id="posZ" step="0.1" value="0"></label>
      </section>

      <section class="control-group">
        <label for="rotX">Rot X: <input type="number" id="rotX" step="0.1" value="0"></label>
        <label for="rotY">Rot Y: <input type="number" id="rotY" step="0.1" value="0"></label>
        <label for="rotZ">Rot Z: <input type="number" id="rotZ" step="0.1" value="0"></label>
      </section>

      <section class="control-group">
        <label for="color">Color: <input type="color" id="color" value="#00ff00"></label>
      </section>

      <section class="control-group">
        <button id="addCubeBtn">Add Cube</button>
      </section>

      <section class="control-group">
        <h3>Cubes List</h3>
        <ul id="cubeList"></ul>
      </section>

      <section class="control-group">
        <h3>Scripting</h3>
        <textarea id="scriptEditor" rows="8" cols="30">// Write JS here...</textarea>
        <button id="runScriptBtn">Run Script</button>
      </section>
    </div>

    <!-- Aba Map -->
    <div id="mapSettings" style="display:none;">
      <section class="control-group">
        <label for="sunIntensity">Sun Light Intensity:
          <input type="number" id="sunIntensity" step="0.1" min="0" max="5" value="1">
        </label>
      </section>
      <section class="control-group">
        <label for="ambientIntensity">Ambient Light Intensity:
          <input type="number" id="ambientIntensity" step="0.1" min="0" max="2" value="0.3">
        </label>
      </section>
    </div>
  </aside>

  <main id="viewport"></main>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
  <script src="main.js"></script>

  <script>
    const toggleBtn = document.getElementById("togglePanelBtn");
    const objectSettings = document.getElementById("objectSettings");
    const mapSettings = document.getElementById("mapSettings");

    const sunIntensityInput = document.getElementById("sunIntensity");
    const ambientIntensityInput = document.getElementById("ambientIntensity");

    // 🔄 Alternar aba
    function syncMapControls() {
      if (window.sunLight) {
        sunIntensityInput.value = Number(window.sunLight.intensity).toFixed(2);
      }
      if (window.ambientLight) {
        ambientIntensityInput.value = Number(window.ambientLight.intensity).toFixed(2);
      }
    }

    toggleBtn.addEventListener("click", () => {
      if (objectSettings.style.display !== "none") {
        objectSettings.style.display = "none";
        mapSettings.style.display = "block";
        toggleBtn.textContent = "Objects";
        syncMapControls();
      } else {
        objectSettings.style.display = "block";
        mapSettings.style.display = "none";
        toggleBtn.textContent = "Map";
      }
    });

    // ☀️ Controle do Sol
    sunIntensityInput.addEventListener("input", () => {
      const val = parseFloat(sunIntensityInput.value);
      if (!isNaN(val) && window.sunLight) {
        window.sunLight.intensity = val;
      }
    });

    // 🌍 Controle da luz ambiente
    ambientIntensityInput.addEventListener("input", () => {
      const val = parseFloat(ambientIntensityInput.value);
      if (!isNaN(val) && window.ambientLight) {
        window.ambientLight.intensity = val;
      }
    });
  </script>
</body>
</html>
