<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Map Creator 3D</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div id="menuBar" role="menubar" aria-label="Application menu">
    <div class="menuItem" id="fileMenuBtn" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <span>File</span>
      <ul class="dropdown" role="menu" aria-label="File menu">
        <li id="menuSave" role="menuitem" tabindex="-1">Save</li>
        <li id="menuOpen" role="menuitem" tabindex="-1">Open</li>
      </ul>
    </div>
    <div class="menuItem" id="addMenuBtn" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <span>Add</span>
      <ul class="dropdown" role="menu" aria-label="File menu">
        <li id="menuCube" role="menuitem" tabindex="-1">Create Cube</li>
        <li id="menuSphere" role="menuitem" tabindex="-1">Create Sphere</li>
        <li id="menuPlane" role="menuitem" tabindex="-1">Create Plane</li>
        <li id="menuCamera" role="menuitem" tabindex="-1">Create Camera</li>
      </ul>
    </div>
  </div>

  
  <header id="topMenu" role="navigation" aria-label="Main menu">
    <nav id="leftButtons">
      <button id="runButton" aria-label="Run">
        <img src="resources/images/ui/buttons/run.png" role="presentation" />
        <span>Run</span>
      </button>
      <button id="stopButton" aria-label="Stop">
        <img src="resources/images/ui/buttons/stop.png" role="presentation" />
        <span>Stop</span>
      </button>

      <!-- Fullscreen in scripts-->
      
      <button id="focusScriptBtn" aria-label="Focus Script" title="Put the script in fullscreen">
        <img src="resources/images/ui/buttons/fullScreen.png" />
        <span>Script View</span>
      </button>

      <!-- Import plugins file -->
      
      <button id="pluginBtn" aria-label="Plugin" title="Import plugins for customization">
        <img src="resources/images/ui/icons/plugin.png" />
        <span>Import Plugin</span>
      </button>
      <input type="file" id="pluginFolderInput" webkitdirectory directory multiple hidden />

      <!-- Add Cube button -->
      
      <button id="addCubeBtn" aria-label="Add Cube" title="Add cube in map">
        <div class="icon-wrapper">
          <img src="resources/images/ui/icons/cube.png" alt="" class="base-icon"/>
          <img src="resources/images/ui/icons/add.png" alt="" class="overlay-icon"/>
        </div>
        <span>Add Cube</span>
      </button>

      <button id="addSphereBtn" aria-label="Add Sphere" title="Add sphere in map">
        <div class="icon-wrapper">
          <img src="resources/images/ui/icons/sphere.png" alt="" class="base-icon"/>
          <img src="resources/images/ui/icons/add.png" alt="" class="overlay-icon"/>
        </div>
        <span>Add Sphere</span>
      </button>
      <button id="addPlaneBtn" aria-label="Add Plane" title="Add plane in map">
        <div class="icon-wrapper">
          <img src="resources/images/ui/icons/plane.png" alt="" class="base-icon"/>
          <img src="resources/images/ui/icons/add.png" alt="" class="overlay-icon"/>
        </div>
        <span>Add Plane</span>
      </button>
      <button id="addCameraBtn" aria-label="Add Camera" title="Add camera in map">
        <div class="icon-wrapper">
          <img src="resources/images/ui/icons/camera.png" alt="" class="base-icon"/>
          <img src="resources/images/ui/icons/add.png" alt="" class="overlay-icon"/>
        </div>
        <span>Add Camera</span>
      </button>
    </nav>

    <nav id="rightButtons">

      <!-- Mesh Wireframe -->
      
      <button id="wireframeToggleBtn" aria-label="Toggle Wireframe" title="Put in objects wireframe mode">
        <img src="resources/images/ui/buttons/wireframe.png" role="presentation" />
        <span>Wireframe</span>
      </button>

      <!-- PNG and JPEG/JPG Texture for meshs -->
      
      <button id="importTextureBtn" aria-label="Import Texture" title="Import image file texture">
        <img src="resources/images/ui/icons/texture.png" role="presentation" />
        Import Texture
      </button>
      <input type="file" id="importButton" accept="image/png, image/jpeg" hidden />

      <!-- Background color parameters -->
      
      <label for="bgColorInput" id="skyColorLabel" class="colorInputWrapper" title="Put a background color with HEX color code">
        Sky Color:
        <input type="text" id="bgColorInput" maxlength="7" value="#00AFFF" placeholder="#00AFFF" autocomplete="off" />
      </label>
    </nav>
  </header>

  <aside id="panel" aria-label="Map editor controls">
    <div id="panel-resize-handle" aria-hidden="true"></div>

    <!-- Scale parameters -->
    
    <section class="control-group" aria-labelledby="scaleLabel">
      <h2 id="scaleLabel" class="sr-only">
        Scale Controls
      </h2>
      <label for="scaleX">
        Scale X:
        <input type="number" id="scaleX" step="0.1" min="0.1" value="1" disabled />
      </label>
      <label for="scaleY">
        Scale Y:
        <input type="number" id="scaleY" step="0.1" min="0.1" value="1" disabled />
      </label>
      <label for="scaleZ">
        Scale Z:
        <input type="number" id="scaleZ" step="0.1" min="0.1" value="1" disabled />
      </label>
    </section>

    <!-- Position parameters -->
    
    <section class="control-group" aria-labelledby="positionLabel">
      <h2 id="positionLabel" class="sr-only">
        Position Controls
      </h2>
      <label for="posX">
        Position X:
        <input type="number" id="posX" step="0.1" value="0" disabled />
      </label>
      <label for="posY">
        Position Y:
        <input type="number" id="posY" step="0.1" value="0.5" disabled />
      </label>
      <label for="posZ">
        Position Z:
        <input type="number" id="posZ" step="0.1" value="0" disabled />
      </label>
    </section>

    <!-- Rotation parameters-->
    
    <section class="control-group" aria-labelledby="rotationLabel">
      <h2 id="rotationLabel" class="sr-only">
        Rotation Controls
      </h2>
      <label for="rotX">
        Rotation X:
        <input type="number" id="rotX" step="0.1" />
      </label>
      <label for="rotY">
        Rotation Y:
        <input type="number" id="rotY" step="0.1" />
      </label>
      <label for="rotZ">
        Rotation Z:
        <input type="number" id="rotZ" step="0.1" />
      </label>
    </section>

    <section class="control-group color-center" aria-labelledby="colorLabel">
      <label for="colorHex" class="colorInputWrapper">
        Color HEX:
        <input type="text" id="colorHex" maxlength="7" pattern="#[0-9a-fA-F]{6}" placeholder="#ffffff" disabled />
      </label>
    </section>

    <section id="cubeList" tabindex="0" aria-label="List of cubes"></section>

    <!-- GScripting -->
    
    <section id="scriptingSection" aria-label="Scripting console">
      <button id="exitScriptFocusBtn" style="display:none; margin-top:10px;"> ðŸ”™ Back </button>
      <h2>
        Scripting
      </h2>
      <textarea id="scriptInput">
        gconsole.print("Hello, World")
      </textarea>
      <button id="runScriptBtn">
        Run Script
      </button>
      <div id="scriptOutput"></div>
    </section>
  </aside>
  
  <main id="sceneContainer" role="main"></main>

  <!-- CMD -->

  <div id="commandLineWrapper">
    <input 
      type="text" 
      id="commandLine" 
      placeholder="Type a command..."
    />
  </div>

  <!-- Scripts -->

  <!-- Libs -->
  
  <script src="libs/three.min.js"></script>
  <script src="libs/objLoader.js"></script>

  <script src="libs/kfw.js"></script>

  <!-- Main Script -->
  
  <script src="scripts/main.js"></script>

  <!-- File import Scripts -->
  
  <script src="scripts/import/plugin.js"></script>
  <script src="scripts/import/texture.js"></script>

  <!-- Object Scripts -->
  
  <script src="scripts/objects/color.js"></script>
  <script src="scripts/objects/add.js"></script>
  <script src="scripts/objects/wireframe.js"></script>
  <script src="scripts/objects/history.js"></script>

  <!-- Code Scripts -->

  <script src="scripts/codes/scripting.js"></script>
  <script src="scripts/codes/json.js"></script>

  <!-- Services -->
  
  <script src="scripts/services/save.js"></script>
  <script src="scripts/services/load.js"></script>

  <script src="scripts/services/menuStrip.js"></script>
  
  <script src="scripts/services/keys.js"></script>

  <script src="scripts/services/sounds.js"></script>
  
  <script>
    function isMobileOrTablet() {
      return /Mobi|Android|iPad|iPhone|iPod|Tablet/i.test(navigator.userAgent) || window.innerWidth < 1024;
    }

    if (isMobileOrTablet()) {
      document.body.innerHTML = `
        <div style="
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;
          height: 100vh;
          background-color: #111;
          color: white;
          font-family: sans-serif;
          padding: 20px;
        ">
          <div>
            <h1 style="font-size: 2em;">Your device is not supported on this site.</h1>
            <p style="font-size: 1.2em;">Use a computer to access this site.</p>
          </div>
        </div>
      `;
    }
  </script>

  <script>
    const focusBtn = document.getElementById("focusScriptBtn");
    const exitBtn = document.getElementById("exitScriptFocusBtn");

    focusBtn.addEventListener("click", () => {
      document.body.classList.add("focusing-script");
      exitBtn.style.display = "inline-block";
    });

    exitBtn.addEventListener("click", () => {
      document.body.classList.remove("focusing-script");
      exitBtn.style.display = "none";
    });
  </script>

  <script>
    document.getElementById('importTextureBtn').addEventListener('click', () => {
      document.getElementById('importButton').click();
    });
  </script>
</body>
</html>
